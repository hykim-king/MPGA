<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pcwk.ehr.brand">
    <!-- resultmap 
         column Alias TO VO
    -->
    <resultMap type="BrandVO" id="brandResultMap">
     <id       property="bCode"           column="b_cod"/>
     <result   property="bLogoImg"        column="b_logo_img"/>
     <result   property="bUrl"            column="b_url"/>
     <result   property="bItr"            column="b_itr"/> 
     <result   property="bName"           column="b_name"/>
     <result   property="modDt"           column="mod_dt"/>
     <result   property="regNum"          column="reg_num"/>
    </resultMap>


    <!-- delete -->
    <delete id="doDelete" parameterType="BrandVO">
       DELETE FROM brand
       WHERE b_cod = #{bCode}
    </delete>


    <insert id="doInsert" parameterType="BrandVO">
       INSERT INTO BRAND(b_cod,b_logo_img,b_url,b_itr,b_name,mod_dt,reg_num)
       VALUES (#{b_cod},#{b_logo_img},#{b_url},#{b_itr},#{b_name},sysdate,#{reg_num})   
    </insert>


    <select id="doSelectOne" parameterType=""  resultMap="brandResultMap">
       SELECT b_cod,
              b_logo_img,
              b_url,   
              b_itr,
              b_name,
              TO_CHAR(mod_dt,'YYYY/MM/DD HH24MISS') mod_dt,  
              reg_num
       FROM brand
       WHERE b_cod  <![CDATA[ = ]]> #{b_cod}
    </select>


    <update id="doUpdate" parameterType="UserVO">
       UPDATE brand
       SET   b_cod         = #{bCode},
	         b_logo_img    = #{bLogoImg},
	         b_url         = #{bUrl},
	         b_itr         = #{bItr},
	         b_name        = #{recommend},
	         mod_dt        = sysdate,
	         reg_num       = #{bName}
       WHERE b_cod         = #{bCode} 
    </update> 
    
    
    <delete id="deleteAll">
        DELETE FROM brand
    </delete>
    
    
    <select id="getCount" resultType="int">
       SELECT COUNT(*) cnt FROM brand
    </select>
    
    
    <select id="getAll"  resultMap="brandResultMap">
		    SELECT b_cod,
		           b_logo_img,
		           b_url,
		           b_itr,
		           b_name,
                   TO_CHAR(mod_dt,'YYYY/MM/DD HH24MISS') mod_dt,
		           reg_num
		    FROM brand
		    ORDER BY b_cod              
    </select>



</mapper>